<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Placeholder for favicon.ico. Replace with your actual favicon URL. -->
    <link rel="icon" type="image/x-icon" href="https://placehold.co/16x16/0d0d0d/00ff00?text=PI">
    <title>Raspberry Pi Pico 2 OLED Project Code</title>

    <!-- Tailwind CSS CDN for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define CSS Variables for consistent theming */
        :root {
            --color-primary-green: #00ff00;
            --color-dark-background: #0d0d0d;
            --color-code-background: #1a1a1a;
            --color-border-subtle: #333333;
            --color-credit-green: #33cc33;
            --font-mono: "Courier New", monospace;
        }

        body {
            font-family: var(--font-mono);
            background-color: var(--color-dark-background);
            color: var(--color-primary-green);
            /* Tailwind flex and spacing for central alignment on page */
            @apply flex flex-col items-center justify-start min-h-screen p-5 sm:p-8 lg:p-10;
        }

        h1, h2, h3, p, ul, li {
            color: var(--color-primary-green);
        }

        pre {
            background-color: var(--color-code-background);
            color: var(--color-primary-green);
            /* Tailwind padding, border, and rounded corners */
            @apply p-4 border border-[var(--color-border-subtle)] rounded-lg overflow-x-auto whitespace-pre-wrap break-words;
            /* Ensure the pre block takes appropriate width */
            max-width: calc(100vw - 40px); /* Account for body margin */
            width: 100%;
        }

        /* Image Style */
        .pico-image {
            /* Tailwind margin-top, border, rounded corners, max-width, width, and display for centering */
            @apply mt-5 border-2 border-[var(--color-primary-green)] rounded-lg max-w-xl w-full h-auto block mx-auto;
        }

        /* Button and Credit Container */
        .button-credit-container {
            @apply text-center mt-5;
        }

        .credit {
            font-size: 0.9em;
            color: var(--color-credit-green);
            @apply block mb-2; /* Add some margin below the credit */
        }

        /* General Button Styling */
        .btn {
            @apply px-5 py-2.5 rounded-md cursor-pointer text-base font-bold transition-all duration-300 ease-in-out;
            border: 1px solid var(--color-primary-green);
            color: var(--color-primary-green);
            background-color: var(--color-code-background);
        }

        .btn:hover {
            background-color: var(--color-primary-green);
            color: var(--color-dark-background);
        }

        /* Specific Button Styles */
        .back-button {
            @apply mt-4; /* Add margin-top for separation */
        }

        .copy-button {
            @apply inline-block my-4; /* Spacing for the copy button */
        }

        /* Message box for copy feedback */
        .message-box {
            @apply fixed top-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white py-2 px-4 rounded-lg shadow-lg z-50 transition-opacity duration-300 opacity-0;
        }
        .message-box.show {
            @apply opacity-100;
        }


        /* Google Translate specific styling to match theme */
        #google_translate_element {
            @apply mt-8 text-center;
        }

        /* Specific styles for Google Translate dropdown to match your theme */
        #google_translate_element .goog-te-gadget-simple {
            background-color: var(--color-dark-background) !important;
            border: 1px solid var(--color-primary-green) !important;
            border-radius: 8px !important;
            padding: 8px !important;
            box-shadow: none !important;
        }

        #google_translate_element select {
            color: var(--color-primary-green) !important;
            background-color: var(--color-dark-background) !important;
            border: none !important;
            outline: none !important;
        }

        /* Hide Google Translate banner and adjust body top offset */
        .goog-te-banner-frame.skiptranslate {
            display: none !important;
        }
        body {
            top: 0px !important;
        }
    </style>
</head>

<body>
    <main class="w-full max-w-4xl">
        <h1 class="text-3xl sm:text-4xl font-bold mb-6">Raspberry Pi Pico 2 Project Code and Wiring Instructions</h1>

        <section class="mb-8">
            <h2 class="text-2xl sm:text-3xl font-bold mb-4">Instructions</h2>
            <p class="text-base sm:text-lg leading-relaxed">Use this code to display "Welcome to Coding" on an OLED connected to a Raspberry Pi Pico 2. The code also reads values from a DHT11 temperature and humidity sensor and an MQ gas sensor.</p>
        </section>

        <section class="mb-8">
            <h3 class="text-xl sm:text-2xl font-bold mb-4">Code for Raspberry Pi Pico 2</h3>
            <p class="text-base sm:text-lg leading-relaxed mb-4">Copy the code below into the Arduino IDE and upload it to your Raspberry Pi Pico 2:</p>

            <pre id="code-block">
#include &lt;U8g2lib.h&gt;
#include &lt;DHT.h&gt;

// Define sensor pins
#define MQ_PIN 26      // Analog pin for MQ sensor
#define DHT_PIN 28     // Digital pin for DHT11 sensor

// Initialize U8g2 for the OLED display
// Adjust U8G2_SSD1306_128X64_NONAME_F_HW_I2C based on your specific OLED type and connection (I2C address, reset pin)
U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0, /* reset=*/ U8X8_PIN_NONE);

// DHT sensor settings
// Initialize DHT11 sensor. If using DHT22, change DHT11 to DHT22.
DHT dht(DHT_PIN, DHT11);

void setup() {
    Serial.begin(115200); // Start serial communication for debugging

    // Initialize the OLED display
    u8g2.begin();
    u8g2.clearBuffer(); // Clear the display buffer
    u8g2.setFont(u8g2_font_ncenB08_tr); // Set font for text
    u8g2.setCursor(0, 10); // Set cursor position
    u8g2.print("Initializing..."); // Display initialization message
    u8g2.sendBuffer(); // Send buffer to display

    // Initialize the DHT sensor
    dht.begin();
    Serial.println("DHT sensor initialized."); // Debug message
}

void loop() {
    // Read temperature and humidity from DHT sensor
    float humidity = dht.readHumidity();
    float temperature = dht.readTemperature();

    // Read analog value from MQ gas sensor
    int mqValue = analogRead(MQ_PIN);

    // Check if any reads failed and exit early (e.g. sensor not connected)
    if (isnan(humidity) || isnan(temperature)) {
        Serial.println("Failed to read from DHT sensor!");
        // Optionally display an error message on OLED
        u8g2.clearBuffer();
        u8g2.setFont(u8g2_font_ncenB08_tr);
        u8g2.setCursor(0, 30);
        u8g2.print("DHT Read Error!");
        u8g2.sendBuffer();
        delay(2000);
        return; // Skip the rest of the loop
    }

    // Clear the display buffer for new content
    u8g2.clearBuffer();

    // Display welcome message (adjust font and position as needed)
    u8g2.setFont(u8g2_font_ncenB08_tr);
    u8g2.setCursor(0, 10);
    u8g2.print("Welcome to Coding");

    // Display sensor values (temperature, humidity, MQ value)
    u8g2.setCursor(0, 30);
    u8g2.print("Temp: ");
    u8g2.print(temperature);
    u8g2.print(" C");

    u8g2.setCursor(0, 45);
    u8g2.print("Humidity: ");
    u8g2.print(humidity);
    u8g2.print(" %");

    u8g2.setCursor(0, 60);
    u8g2.print("MQ Value: ");
    u8g2.print(mqValue);

    // Send the content of the buffer to the OLED display
    u8g2.sendBuffer();

    delay(2000); // Wait for 2 seconds before the next update
}
            </pre>
            <button class="copy-button btn" id="copyCodeBtn">Copy Code</button>
            <div id="copyMessageBox" class="message-box"></div>
        </section>

        <section class="mb-8">
            <h3 class="text-xl sm:text-2xl font-bold mb-4">Project Image</h3>
            <!-- IMPORTANT: Replace this placeholder URL with the actual hosted URL of your "Pico2.jpg" image -->
            <img src="https://placehold.co/600x400/0d0d0d/00ff00?text=PICO+2+Project+Image" alt="Raspberry Pi Pico 2 Wiring" class="pico-image">
        </section>

        <div class="button-credit-container">
            <div class="credit">
                <p>Created with the help of ChatGPT.</p>
            </div>
            <div class="button-container">
                <button class="back-button btn" id="backToHomeBtn">Back to Home</button>
            </div>
        </div>

        <div id="google_translate_element"></div>
    </main>

    <script type="text/javascript">
        // Google Translate initialization function
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,es,fr,de,ja,ko',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }

        // DOMContentLoaded ensures the script runs after the entire HTML is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const codeBlock = document.getElementById('code-block');
            const copyCodeBtn = document.getElementById('copyCodeBtn');
            const messageBox = document.getElementById('copyMessageBox');
            const backToHomeBtn = document.getElementById('backToHomeBtn');

            // Copy Code Functionality
            if (copyCodeBtn && codeBlock && messageBox) {
                copyCodeBtn.addEventListener('click', () => {
                    const textToCopy = codeBlock.innerText || codeBlock.textContent;

                    // Use the modern Clipboard API if available, otherwise fallback
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(textToCopy)
                            .then(() => showMessage('Copied!', true))
                            .catch(err => {
                                console.error('Failed to copy text using Clipboard API: ', err);
                                showMessage('Copy Failed!', false);
                            });
                    } else {
                        // Fallback for older browsers (using document.execCommand)
                        const textArea = document.createElement('textarea');
                        textArea.value = textToCopy;
                        // Make the textarea invisible and off-screen
                        textArea.style.position = 'fixed';
                        textArea.style.top = '-9999px';
                        textArea.style.left = '-9999px';
                        document.body.appendChild(textArea);
                        textArea.focus();
                        textArea.select();

                        try {
                            const successful = document.execCommand('copy');
                            if (successful) {
                                showMessage('Copied!', true);
                            } else {
                                showMessage('Copy Failed!', false);
                            }
                        } catch (err) {
                            console.error('Fallback: Oops, unable to copy', err);
                            showMessage('Copy Failed!', false);
                        } finally {
                            document.body.removeChild(textArea);
                        }
                    }
                });
            }

            // Function to show and hide the copy message
            function showMessage(msg, isSuccess) {
                messageBox.textContent = msg;
                messageBox.className = 'message-box show'; // Reset classes and add show
                if (isSuccess) {
                    messageBox.classList.add('bg-green-600');
                } else {
                    messageBox.classList.add('bg-red-600');
                }

                // Hide the message after 2 seconds
                setTimeout(() => {
                    messageBox.className = 'message-box'; // Hide it
                    messageBox.classList.remove('bg-green-600', 'bg-red-600'); // Clear color classes
                }, 2000);
            }

            // Back to Home button functionality
            if (backToHomeBtn) {
                backToHomeBtn.addEventListener('click', () => {
                    // Adjust this path if 'index.html' is not in the same directory
                    window.location.href = 'index.html';
                });
            }
        });
    </script>
    <!-- Google Translate script -->
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" defer></script>
</body>

</html>

